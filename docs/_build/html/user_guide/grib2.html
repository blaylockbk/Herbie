
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>üî¢ What is GRIB2? &#8212; Herbie 2022.9.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/brian_style.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-PT9LX1B7B8"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-PT9LX1B7B8');
            </script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/grib2';</script>
    <script src="https://kit.fontawesome.com/f6cc126dcc.js"></script>
    <link rel="shortcut icon" href="../_static/wxicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="‚òÅ Data Sources" href="data_sources.html" />
    <link rel="prev" title="üìú History" href="history.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/HerbieLogo2_tan_transparent.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/HerbieLogo2_white_transparent.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api_reference/index.html">
                        API Reference
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://blaylockbk.github.io/SynopticPy/_build/html/">
                    SynopticPy
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://blaylockbk.github.io/goes2go/_build/html/">
                    GOES-2-go
                  </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/blaylockbk/Herbie" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://twitter.com/blaylockbk" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api_reference/index.html">
                        API Reference
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://blaylockbk.github.io/SynopticPy/_build/html/">
                    SynopticPy
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://blaylockbk.github.io/goes2go/_build/html/">
                    GOES-2-go
                  </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/blaylockbk/Herbie" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://twitter.com/blaylockbk" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="install.html">üêç Installation</a></li>

<li class="toctree-l1"><a class="reference internal" href="configure.html">üõ† Configure</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Background Knowledge</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="history.html">üìú History</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">üî¢ What is GRIB2?</a></li>

<li class="toctree-l1"><a class="reference internal" href="data_sources.html">‚òÅ Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_info.html">‚Ñπ Model Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="zarr.html">‚ö° What about Zarr?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Using Herbie</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="_tutorial_notebooks/index.html">üë®üèª‚Äçüíª Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="_tutorial_notebooks/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="_tutorial_notebooks/fast.html">FastHerbie</a></li>
<li class="toctree-l2"><a class="reference internal" href="_tutorial_notebooks/accessors.html">Herbie Accessors</a></li>
<li class="toctree-l2"><a class="reference internal" href="_tutorial_notebooks/demo_map.html">Brian‚Äôs Maps</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="_model_notebooks/index.html">üó∫ Model Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/hrrr.html">HRRR Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/hrrrak.html">HRRR-Alaska Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/rap.html">RAP Data</a></li>


<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/nam.html">NAM Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/gfs.html">GFS Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/gefs.html">Global Ensembele Forecast System (GEFS) reanalysis: 2000-2019</a></li>

<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/ecmwf.html">ECMWF Open Data ‚Äì Real Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/nbm.html">National Blend of Models (NMB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/rrfs.html">RRFS Data</a></li>

<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/navgem.html">NAVGEM Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="_model_notebooks/nogaps.html">Historical NOGAPS Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="searchString.html">ü™Ç Subset with <code class="docutils literal notranslate"><span class="pre">searchString</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="extend.html">üë∑üèª‚Äç‚ôÇÔ∏è Extending Herbie</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Housekeeping</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="citation.html">üñã How to Cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html">üë®üèª‚Äçüè≠ Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_guide.html">üé® Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_tools.html">‚öí Other Tools</a></li>

</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="what-is-grib2">
<span id="grib2-faq"></span><h1>üî¢ What is GRIB2?<a class="headerlink" href="#what-is-grib2" title="Permalink to this heading">#</a></h1>
<p>GRIB stands for ‚Äúgridded binary‚Äù and is an international standard for meteorological data. There is an old standard GRIB, and a new standard GRIB2. In these documents, when I refer to GRIB I really mean the new GRIB2 standard.</p>
<p>Yes, GRIB is notoriously difficult to work with and has a steep learning curve for those unfamiliar with the format. I won‚Äôt discuss here the good, bad, and ugly of GRIB frankly because I‚Äôm not an expert and probably will say something wrong. However, even seasoned meteorologists complain about GRIB. Since complaining won‚Äôt fix the problem, I choose to embrace it because, for now, NWP data is widely distributed as GRIB2.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/GRIB">Wikipedia: GRIB</a></p></li>
<li><p><a class="reference external" href="https://confluence.ecmwf.int/display/CKB/What+are+GRIB+files+and+how+can+I+read+them">ECMWF: What are GRIB files and how can I read them?</a></p></li>
</ul>
<section id="command-line-tools">
<h2>Command Line Tools<a class="headerlink" href="#command-line-tools" title="Permalink to this heading">#</a></h2>
<p>There are two command-line tools for looking at GRIB file contents.</p>
<ol class="arabic simple">
<li><p><em>wgrib2</em> is a product of NOAA/NCEP and can be installed via conda-forge in your environment (Linux only). | <a class="reference external" href="https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/">wrgib2 documentation</a> |</p></li>
<li><p><em>grib_ls</em> in the ecCodes package is a product of ECMWF. Since ecCodes is a dependency of cfgrib, this utility is included when you install cfgrib in your conda environment. | <a class="reference external" href="https://confluence.ecmwf.int/display/ECC/grib_ls">grib_ls documentation</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge wgrib2 eccodes
</pre></div>
</div>
<p>For a sample GRIB2 file with precipitation data, below is the output using both tools</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wgrib2 subset_20201214_hrrr.t00z.wrfsfcf12.grib2

OUT:
<span class="m">1</span>:0:d<span class="o">=</span><span class="m">2020121400</span>:APCP:surface:0-12 hour acc fcst:
<span class="m">2</span>:887244:d<span class="o">=</span><span class="m">2020121400</span>:APCP:surface:11-12 hour acc fcst:
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ grib_ls subset_20201214_hrrr.t00z.wrfsfcf12.grib2

OUT:
subset_20201214_hrrr.t00z.wrfsfcf12.grib2
edition      centre       date         dataType     gridType     typeOfLevel  level        stepRange    shortName    packingType
<span class="m">2</span>            kwbc         <span class="m">20201214</span>     <span class="nb">fc</span>           lambert      surface      <span class="m">0</span>            <span class="m">0</span>-12         tp           grid_complex_spatial_differencing
<span class="m">2</span>            kwbc         <span class="m">20201214</span>     <span class="nb">fc</span>           lambert      surface      <span class="m">0</span>            <span class="m">11</span>-12        tp           grid_complex_spatial_differencing
<span class="m">2</span> of <span class="m">2</span> messages <span class="k">in</span> subset_20201214_hrrr.t00z.wrfsfcf12.grib2

<span class="m">2</span> of <span class="m">2</span> total messages <span class="k">in</span> <span class="m">1</span> files
</pre></div>
</div>
<p>Of course, there are many more command line options to get more data than was returned in this example.</p>
</section>
<section id="python-tools">
<h2>Python Tools<a class="headerlink" href="#python-tools" title="Permalink to this heading">#</a></h2>
<p>There are two key python packages for reading GRIB2 files. Both can be installed via conda-forge.</p>
<ul class="simple">
<li><p><strong>pygrib</strong> is what I started to learn and still use sometimes. | <a class="reference external" href="https://youtu.be/yLoudFv3hAY">Video Demo</a> |  <a class="reference external" href="https://github.com/jswhit/pygrib">pygrib GitHub</a> |</p></li>
<li><p><strong>cfgrib</strong> works well reading GRIB2 data as xarray datasets. Make sure you have the latest version (&gt;0.9.8) |  <a class="reference external" href="https://github.com/ecmwf/cfgrib">cfgrib GitHub</a></p></li>
</ul>
</section>
</section>
<section id="how-grib-subsetting-works-in-herbie">
<h1>How GRIB subsetting works in Herbie<a class="headerlink" href="#how-grib-subsetting-works-in-herbie" title="Permalink to this heading">#</a></h1>
<p>GRIB files are gridded binary where GRIB _messages_ or _fields_ are stacked on top of each other in a file. A message might contain temperature data for a level (e.g., surface, 500 hPa) at a specific time across the United States. I like to think of each message as a ‚Äúlayer‚Äù in the file.</p>
<p>Because the file is made up of individual ‚Äúmessages,‚Äù it is possible to download portions of GRIB2 file by retrieving just specific messages using HTTP <a class="reference external" href="https://www.keycdn.com/support/byte-range-requests">Byte-Range request</a>.</p>
<p>Herbie supports <strong>subsetting GRIB2 files by GRIB message</strong>, provided that an _inventory_ or _index_ (.idx) file exists. The index file tells us the beginning byte of each GRIB message. To download a subset, Herbie uses the <strong>cURL</strong> command which allows you to download a range of bytes from a file. By repeating the cURL command and appending the messages you a file, you can subset a full file on the remote server and download only the fields you need. Keep in mind that a GRIB message represents the variable over the full grid. It is only possible to subset the file by GRIB message and not by geographical region (i.e., you cannot do a regional subset).</p>
<p>Why would you want to subset GRIB2 files? Well, GRIB files provided by operational forecast centers are usually very large because they can contain hundreds of model output variables, and each variable is its own GRIB message. For example, native grid HRRR files can be ~700 MB each! That adds up quick if you need a lot of days and forecasts and all you are interested in surface temperature. Often, you only need some of the data in the file. The size of a single HRRR message is about 1 MB. If you subset the data as you download it, you will save a lot of disk space and improve your data acquisition time by reducing the download time.</p>
<figure class="align-default" id="id1">
<img alt="../_images/GRIB2_file_cURL.png" src="../_images/GRIB2_file_cURL.png" />
<figcaption>
<p><span class="caption-text">GRIB2 files are made up of messages or fields that can be extracted instead of downloading the full file.</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The challenge to downloading parts of the full GRIB2 file finding the byte range for a variable you want, but that is what Herbie does for you. Herbie looks at the index file, identifies the variables you want and its byte range, and downloads each message you request with cURL.</p>
<p>Each GRIB2 file has a unique index file and looks something like this example from the HRRR model. This is an example of the wgrib2-style index file and are provided for NCEP models:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">REFC</span><span class="p">:</span><span class="n">entire</span> <span class="n">atmosphere</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">2</span><span class="p">:</span><span class="mi">354859</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">RETOP</span><span class="p">:</span><span class="n">cloud</span> <span class="n">top</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">3</span><span class="p">:</span><span class="mi">624897</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">var</span> <span class="n">discipline</span><span class="o">=</span><span class="mi">0</span> <span class="n">center</span><span class="o">=</span><span class="mi">7</span> <span class="n">local_table</span><span class="o">=</span><span class="mi">1</span> <span class="n">parmcat</span><span class="o">=</span><span class="mi">16</span> <span class="n">parm</span><span class="o">=</span><span class="mi">201</span><span class="p">:</span><span class="n">entire</span> <span class="n">atmosphere</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">4</span><span class="p">:</span><span class="mi">1037681</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">VIL</span><span class="p">:</span><span class="n">entire</span> <span class="n">atmosphere</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">5</span><span class="p">:</span><span class="mi">1332326</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">VIS</span><span class="p">:</span><span class="n">surface</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">6</span><span class="p">:</span><span class="mi">2730828</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">REFD</span><span class="p">:</span><span class="mi">1000</span> <span class="n">m</span> <span class="n">above</span> <span class="n">ground</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">7</span><span class="p">:</span><span class="mi">2921075</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">REFD</span><span class="p">:</span><span class="mi">4000</span> <span class="n">m</span> <span class="n">above</span> <span class="n">ground</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">8</span><span class="p">:</span><span class="mi">3140924</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">REFD</span><span class="p">:</span><span class="mi">263</span> <span class="n">K</span> <span class="n">level</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">9</span><span class="p">:</span><span class="mi">3364551</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">GUST</span><span class="p">:</span><span class="n">surface</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">10</span><span class="p">:</span><span class="mi">4522696</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">UGRD</span><span class="p">:</span><span class="mi">250</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">11</span><span class="p">:</span><span class="mi">5299993</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">VGRD</span><span class="p">:</span><span class="mi">250</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">12</span><span class="p">:</span><span class="mi">6083105</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">UGRD</span><span class="p">:</span><span class="mi">300</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">13</span><span class="p">:</span><span class="mi">6840781</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">VGRD</span><span class="p">:</span><span class="mi">300</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">14</span><span class="p">:</span><span class="mi">7614021</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">HGT</span><span class="p">:</span><span class="mi">500</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">15</span><span class="p">:</span><span class="mi">8356201</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">TMP</span><span class="p">:</span><span class="mi">500</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">16</span><span class="p">:</span><span class="mi">8898145</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">DPT</span><span class="p">:</span><span class="mi">500</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">9954184</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">UGRD</span><span class="p">:</span><span class="mi">500</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
<span class="mi">18</span><span class="p">:</span><span class="mi">10538876</span><span class="p">:</span><span class="n">d</span><span class="o">=</span><span class="mi">2021072701</span><span class="p">:</span><span class="n">VGRD</span><span class="p">:</span><span class="mi">500</span> <span class="n">mb</span><span class="p">:</span><span class="n">anl</span><span class="p">:</span>
</pre></div>
</div>
<p>Each part has meaning as described in the figure</p>
<figure class="align-default">
<img alt="../_images/index_file_description.png" src="../_images/index_file_description.png" />
</figure>
<p>ECMWF products use a different pattern for their index files (I believe created with the ecCodes/grib_ls tool). The important thing here is that these also tell us what variable is in each GRIB message and the start and end byte. Here is an example of one of the ECMWF index files:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220125&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1800&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;expver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0001&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;od&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;levtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sfc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">}</span><span class="w"></span>
<span class="p">{</span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220125&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1800&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;expver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0001&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;od&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;levtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sfc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">}</span><span class="w"></span>
<span class="p">{</span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220125&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1800&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;expver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0001&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;od&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;levtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sfc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">486</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">}</span><span class="w"></span>
<span class="p">{</span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220125&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1800&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;expver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0001&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;od&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;levtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sfc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2t&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">729</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">609069</span><span class="p">}</span><span class="w"></span>
<span class="p">{</span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220125&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1800&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;expver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0001&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;od&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;levtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sfc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;33&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">609798</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">}</span><span class="w"></span>
<span class="p">{</span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220125&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1800&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;expver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0001&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;od&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;levtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sfc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;34&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">610041</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">}</span><span class="w"></span>
<span class="p">{</span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20220125&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1800&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;expver&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0001&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;od&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;enfo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;levtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sfc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;23&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">610284</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>From these index files, we know the byte range of specific GRIB messages. This enables us to do a byte-range request. For example, we can call the cURL command to download a valid GRIB2 file with only the 2-meter temperature variable.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -o outFile.grib2 --range <span class="m">34884036</span>-36136433 https://pando-rgw01.chpc.utah.edu/hrrr/sfc/20180101/hrrr.t00z.wrfsfcf00.grib2
</pre></div>
</div>
<p>You could repeat the cURL download for different ranges append several variables output to the same file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl --range <span class="c1">######-###### &gt;&gt; outFile.grib2</span>
</pre></div>
</div>
<p>For Herbie to download a subset of the file, this index file must exist on a remote server. Without the index file, it is impossible to know the byte range for each variable. If the index files do not exist, ask the data provider to generate the inventory files and host them on the remote server. The wgrib2-style index files can be created using wgrib2 with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wgrib2 -s file.grib2 &gt; file.grib2.idx
</pre></div>
</div>
<p>Generally speaking, index files share the same URL as the GRIB2 file except with <code class="docutils literal notranslate"><span class="pre">.idx</span></code> appended to the end of the file name. If the GRIB2 file <code class="docutils literal notranslate"><span class="pre">hrrr.t01z.wrfsfcf00.grib2</span></code> exists, then the index file would be <code class="docutils literal notranslate"><span class="pre">hrrr.t01z.wrfsfcf00.grib2.idx</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Regional subsetting is not possible with the methods. This would require some server-side processes. A useful alternative to the GRIB standard is the fairly new Zarr format, which makes subsetting by region possible.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ‚Äúpartial-get/byte-range‚Äù method is similar to that used in Wesley Ebisuzaki‚Äôs <a class="reference external" href="https://www.cpc.ncep.noaa.gov/products/wesley/fast_downloading_grib.html">Fast Downloading GRIB</a> script. It is also described on ECMWF‚Äôs example script <a class="reference external" href="https://confluence.ecmwf.int/display/UDOC/ECMWF+Open+Data+-+Real+Time#ECMWFOpenDataRealTime-DownloadASingleFieldWithWgetDownloadasinglefieldwithwget">here</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When an index file doesn‚Äôt exist, wgrib2 is used to print the index inventory. <strong>wgrib2</strong> can be installed via conda for Linux, but the installation for Windows is a bit more involved. Instead, <a class="reference external" href="https://anaconda.org/conda-forge/eccodes">eccodes</a> can be installed via conda for Linux, OS, and Windows. You can use eccodes‚Äô <strong>grib_ls</strong> command to print out a type of inventory that includes the beginning byte with <code class="docutils literal notranslate"><span class="pre">grib_ls</span> <span class="pre">-p</span> <span class="pre">count,offset,date,hour,level,typeOfLevel,name,step</span> <span class="pre">file.grib2</span></code>, though Herbie does not interpret this type of inventory. (Pull request anyone?)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ grib_ls -p count,offset,date,hour,level,typeOfLevel,name,step file.grib2
hrrr.t12z.wrfsfcf06.grib2.subset_14-15-16-17-18
count        offset       date         hour         level        typeOfLevel  name         step
1            0            20210101     12           500          isobaricInhPa  Geopotential Height  6
2            721229       20210101     12           500          isobaricInhPa  Temperature  6
3            1.2795e+06   20210101     12           500          isobaricInhPa  Dew point temperature  6
4            2.21452e+06  20210101     12           500          isobaricInhPa  U component of wind  6
5            2.80253e+06  20210101     12           500          isobaricInhPa  V component of wind  6
5 of 5 messages in file.grib2
</pre></div>
</div>
<p><em>I‚Äôm not sure how the ECMWF index files are generated, so if you know, please share.</em> This is close, but not exact.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grib_ls someGRIBfile.grib2 -p domain,date,time,expver,class,type,stream,levtype,number,step,param,offset,length -j
</pre></div>
</div>
</div>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="history.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">üìú History</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="data_sources.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">‚òÅ Data Sources</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   üî¢ What is GRIB2?
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#command-line-tools">
     Command Line Tools
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-tools">
     Python Tools
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-grib-subsetting-works-in-herbie">
   How GRIB subsetting works in Herbie
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://github.com/blaylockbk/Herbie/edit/main/docs/user_guide/grib2.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/user_guide/grib2.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022, Brian K. Blaylock.    ‚ôª Updated: 21:27 UTC 10 Dec 2022.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>